# ğŸ—‚ï¸ ä¼˜åŒ–çš„é¡¹ç›®æ–‡ä»¶ç»“æ„è®¾è®¡æ–¹æ¡ˆ

## 1. æ ¸å¿ƒè®¾è®¡ç†å¿µ

ç›®å‰çš„ç»“æ„æ··æ·†äº† **"é€šç”¨ UI"**ã€**"ä¸šåŠ¡å®ä½“ (Entity)"** å’Œ **"é¡µé¢ç‰¹æ€§ (Feature)"**ã€‚ä¸ºäº†è§£å†³æ··ä¹±å¹¶å®ç°ä½ æ‰€æåˆ°çš„ "Item å¯¹è±¡åŒºåŸŸ" å’Œ "å…¨å±€åŸå­" çš„ç›®æ ‡ï¼Œæˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹åŸåˆ™ï¼š

1.  **UI åŸå­å…¨å±€åŒ–**ï¼šæ‰€æœ‰ä¸åŒ…å«å…·ä½“ä¸šåŠ¡é€»è¾‘çš„ UI ç»„ä»¶ï¼ˆå¦‚å¸¦æ ·å¼çš„ Badgeã€ç‰¹å®šæ ·å¼çš„ Buttonï¼‰åº”æå–åˆ° `components/common` æˆ–æ•´åˆè¿› `components/ui`ï¼Œè®©å®ƒä»¬åœ¨ä»»ä½•ä¸šåŠ¡ä¸­éƒ½èƒ½å¤ç”¨ã€‚
2.  **å®ä½“ (Entity) èšåˆ**ï¼šåˆ›å»ºä¸€ä¸ªä¸“å±çš„ "Item å¯¹è±¡åŒºåŸŸ" (`modules/item`)ã€‚æ‰€æœ‰å›´ç»• "Item" çš„**æ•°æ®ç±»å‹**ã€**æ“ä½œé€»è¾‘ (Hook)**ã€**æ ¸å¿ƒå±•ç¤ºç»„ä»¶ (Card/Row)** éƒ½å†…èšäºæ­¤ã€‚
3.  **åŠŸèƒ½ (Feature) ç»„è£…**ï¼š`features/inventory` åªè´Ÿè´£é¡µé¢çš„å¸ƒå±€ã€ç­›é€‰ã€ä»¥åŠå°† Item å®ä½“åˆ—è¡¨æ¸²æŸ“å‡ºæ¥ï¼Œè€Œä¸å†å…³æ³¨ Item å†…éƒ¨çš„å®ç°ç»†èŠ‚ã€‚

---

## 2. æ¨èç›®å½•ç»“æ„

```text
src/ (æˆ–æ ¹ç›®å½•)
â”œâ”€â”€ ğŸ“‚ app/
â”‚   â”œâ”€â”€ ğŸ“‚ actions/             # Server Actions (å»ºè®®æŒ‰é¢†åŸŸæ‹†åˆ†: item.ts, category.ts)
â”‚   â””â”€â”€ ğŸ“‚ inventory/           # Next.js è·¯ç”±é¡µé¢ (page.tsx, layout.tsx)
â”‚
â”œâ”€â”€ ğŸ“‚ components/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ ui/                  # Shadcn åŸºç¡€åŸå­ç»„ä»¶ (Button, Card, Input...)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ common/              # [NEW] å…¨å±€é€šç”¨ç»„ä»¶ (åŸ inventory/atoms æ‹†åˆ†å‡ºçš„çº¯UIéƒ¨åˆ†)
â”‚   â”‚   â”œâ”€â”€ status-badge.tsx    # é€šç”¨çš„çŠ¶æ€å¾½ç«  (æ¥æ”¶ variant, icon, textï¼Œä¸ Item è§£è€¦)
â”‚   â”‚   â”œâ”€â”€ icon-button.tsx     # ç»Ÿä¸€é£æ ¼çš„å›¾æ ‡æŒ‰é’®å°è£…
â”‚   â”‚   â””â”€â”€ data-table/         # é€šç”¨çš„è¡¨æ ¼ç»„ä»¶å°è£…
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ modules/             # [NEW] é¢†åŸŸå®ä½“æ¨¡å— (Entity Layer)
â”‚   â”‚   â””â”€â”€ ğŸ“‚ item/            # âœ¨ "Item å¯¹è±¡åŒºåŸŸ" - æ ¸å¿ƒæ‰€åœ¨
â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ hooks/
â”‚   â”‚       â”‚   â””â”€â”€ use-item.ts # (é‡æ„çš„åŸ use-inventory-item.ts) åŒ…å« CRUDã€è®¡ç®—é€»è¾‘
â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ ui/          # Item ä¸“å±çš„å±•ç¤ºç»„ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ item-card.tsx     # ç‰©å“å¡ç‰‡è§†å›¾ (å¤ç”¨ common ç»„ä»¶)
â”‚   â”‚       â”‚   â”œâ”€â”€ item-row.tsx      # ç‰©å“åˆ—è¡¨è¡Œè§†å›¾
â”‚   â”‚       â”‚   â”œâ”€â”€ item-actions.tsx  # ç‰©å“æ“ä½œæŒ‰é’®ç»„ (é€»è¾‘ç»‘å®š)
â”‚   â”‚       â”‚   â””â”€â”€ item-avatar.tsx   # ç‰©å“å¤´åƒ (å¸¦ Fallback é€»è¾‘)
â”‚   â”‚       â”œâ”€â”€ types.ts        # Item ç±»å‹å®šä¹‰
â”‚   â”‚       â””â”€â”€ utils.ts        # çº¯å‡½æ•°å·¥å…· (getRemainingDays, getStatusColor...)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ features/            # é¡µé¢/åŠŸèƒ½æ¨¡å— (Feature Layer)
â”‚       â””â”€â”€ ğŸ“‚ inventory/       # åº“å­˜ç®¡ç†é¡µé¢ç‰¹æœ‰ç»„ä»¶
â”‚           â”œâ”€â”€ inventory-view.tsx    # è´Ÿè´£ List/Grid åˆ‡æ¢å’Œæ•°æ®ä¼ é€’
â”‚           â”œâ”€â”€ inventory-toolbar.tsx # æœç´¢ã€ç­›é€‰ã€æ’åºæ 
â”‚           â””â”€â”€ inventory-stats.tsx   # ç»Ÿè®¡æ¦‚è§ˆä»ªè¡¨ç›˜ (å¦‚æœ‰)
â”‚
â”œâ”€â”€ ğŸ“‚ hooks/                   # å…¨å±€é€šç”¨ Hooks (use-media-query, use-toast)
â”œâ”€â”€ ğŸ“‚ lib/                     # å…¨å±€å·¥å…·å‡½æ•°ã€æ•°æ®åº“ Prisma å®ä¾‹
â””â”€â”€ ğŸ“‚ types/                   # å…¨å±€å…±äº«ç±»å‹ (å¦‚ API å“åº”ç»“æ„ï¼Œç‰¹å®šå®ä½“ç±»å‹å»ºè®®ç§»å…¥ modules)
```

---

## 3. å…·ä½“é‡æ„ç‚¹åˆ†æ

### A. å…¨å±€åŸå­ç»„ä»¶ (Global Atoms)

**ç°çŠ¶**: `inventory/atoms/item-status-badge.tsx` æ—¢åŒ…å« UI æ ·å¼ï¼ŒåˆåŒ…å« "åˆ¤æ–­æ˜¯å¦è¿‡æœŸ" çš„ä¸šåŠ¡é€»è¾‘ã€‚
**ä¼˜åŒ–**:

1.  **æ‹†åˆ† UI**: åˆ›å»º `components/common/status-badge.tsx`ã€‚å®ƒæ˜¯ä¸€ä¸ªå‚»ç“œç»„ä»¶ï¼Œåªè´Ÿè´£æ˜¾ç¤ºé¢œè‰²å’Œå›¾æ ‡ã€‚
    ```tsx
    // <StatusBadge variant="warning" icon={Clock} label="7å¤©åè¿‡æœŸ" />
    ```
2.  **ä¸šåŠ¡ç»‘å®š**: åœ¨ `modules/item/ui/item-status.tsx` ä¸­å¼•ç”¨ä¸Šè¿°ç»„ä»¶ï¼Œå¹¶æ³¨å…¥ä¸šåŠ¡é€»è¾‘ã€‚

### B. ç‰©å“å¯¹è±¡åŒºåŸŸ (Item Module)

**ç°çŠ¶**: `use-inventory-item.ts` æ•£è½åœ¨ `inventory/hooks`ï¼Œä¸”æ“ä½œæŒ‰é’®ç»„ä»¶é€»è¾‘å¤æ‚ã€‚
**ä¼˜åŒ–**:
å»ºç«‹ `components/modules/item` ç›®å½•ï¼š

- **Hooks**: å°† `use-inventory-item.ts` ç§»å…¥å¹¶æ”¹åä¸º `use-item.ts`ã€‚å®ƒä½œä¸º Item çš„"å¤§è„‘"ï¼Œæä¾› `delete()`, `update()`, `status` ç­‰èƒ½åŠ›ã€‚
- **Components**: `ItemCard` å’Œ `ItemRow` æˆä¸ºè¯¥æ¨¡å—çš„å¯¹å¤–è¾“å‡ºã€‚
- **Colocation**: ç›¸å…³çš„ `types` å’Œ `utils` (æ—¥æœŸè®¡ç®—) ç›´æ¥æ”¾åœ¨è¿™é‡Œï¼Œç»´æŠ¤èµ·æ¥ä¸å†éœ€è¦è·¨æ–‡ä»¶å¤¹æŸ¥æ‰¾ã€‚

### C. åº“/é¡µé¢ (Inventory Feature)

**ç°çŠ¶**: `InventoryListView` é‡Œé¢å¡æ»¡äº†å¯¹ Item çš„å…·ä½“æ¸²æŸ“ç»†èŠ‚ã€‚
**ä¼˜åŒ–**:

- `InventoryView` åªéœ€è¦ import `ItemCard` æˆ– `ItemRow`ã€‚
- å®ƒä¸»è¦è´Ÿè´£å¸ƒå±€ï¼ˆGrid vs Listï¼‰å’Œå°†æ•°æ®åˆ†å‘ç»™ Item ç»„ä»¶ã€‚

## 4. è¿ç§»æ­¥éª¤å»ºè®®

1.  **å»ºç«‹ç›®å½•**: åˆ›å»º `components/common` å’Œ `components/modules/item`ã€‚
2.  **æå–é€šç”¨åŸå­**: å°† `item-status-badge` ä¸­çš„ Badge æ ·å¼æå–åˆ° `common`ã€‚
3.  **è¿ç§»æ ¸å¿ƒ Hook**: å°† `use-inventory-item.ts` ç§»è‡³ `modules/item/hooks`ï¼Œå¹¶æŠŠç›¸å…³çš„æ—¥æœŸè®¡ç®—å‡½æ•°æå–åˆ° `modules/item/utils.ts`ã€‚
4.  **è¿ç§» UI ç»„ä»¶**: å°† `inventory-card.tsx` ç­‰é‡æ„ä¸º `modules/item/ui/item-card.tsx`ï¼Œå¹¶ä½¿ç”¨æ–°çš„ Hook å’Œé€šç”¨åŸå­ã€‚
5.  **æ¸…ç† Feature**: ç®€åŒ– `features/inventory` ä¸­çš„ä»£ç ï¼Œè®©å®ƒåªä½œä¸º"å®¹å™¨"ã€‚
